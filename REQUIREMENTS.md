# SRS Flashcard App - 要件定義書

## プロジェクト概要

Anki風の間隔反復学習（Spaced Repetition System）を実装したWebアプリケーション。
効率的な記憶定着を支援するフラッシュカードアプリケーション。

**作成日**: 2026-01-08
**バージョン**: 1.0.0 (MVP)

---

## 1. プロジェクト目的

- 効率的な学習を支援する間隔反復システムを提供
- 複数ユーザーが各自のデッキを管理できるマルチテナント対応
- 科学的根拠に基づいたFSRS v4アルゴリズムで最適な復習タイミングを提供
- シンプルで直感的なUIで学習に集中できる環境を実現

---

## 2. ターゲットユーザー

- **主要ユーザー**: 複数の学習者（学生、社会人、語学学習者など）
- **特徴**: 各ユーザーが独立したアカウントで自分専用のデッキとカードを管理
- **利用シーン**:
  - 語学学習（単語、文法）
  - 資格試験対策
  - 専門知識の暗記
  - 日常的な復習習慣

---

## 3. コア機能（MVP版）

### 3.1 ユーザー管理

#### 3.1.1 ユーザー登録
- メールアドレスとパスワードによる新規登録
- ユーザー名の設定
- メールアドレス確認（オプション）

#### 3.1.2 ログイン/ログアウト
- メールアドレスとパスワードによる認証
- セッション管理
- ログアウト機能

#### 3.1.3 プロフィール管理
- ユーザー名の変更
- パスワードの変更
- アカウント削除（論理削除）

### 3.2 デッキ管理

#### 3.2.1 デッキ作成
- デッキ名の設定（必須）
- デッキの説明（オプション）
- デッキの作成日時の自動記録

#### 3.2.2 デッキ一覧表示
- ユーザーが作成したデッキの一覧表示
- 各デッキの基本情報表示：
  - デッキ名
  - カード総数
  - 今日の復習予定カード数
  - 新規カード数
  - 学習中カード数

#### 3.2.3 デッキ編集・削除
- デッキ名と説明の編集
- デッキの削除（確認ダイアログ付き）
- デッキ削除時は関連カードも削除（カスケード削除）

### 3.3 カード管理

#### 3.3.1 カードタイプ
**基本カード（表・裏）**
- 表面（Front）: 質問や問題
- 裏面（Back）: 答えや解説
- 画像添付対応（1枚まで）
- Markdown形式のサポート

#### 3.3.2 カード作成
- デッキを選択してカード作成
- 表面と裏面のテキスト入力（必須）
- 画像のアップロード（オプション）
- 作成日時の自動記録

#### 3.3.3 カード編集・削除
- カードの表面・裏面・画像の編集
- カードの削除（確認ダイアログ付き）
- 学習履歴は保持（統計用）

#### 3.3.4 カード一覧・検索
- デッキ内のカード一覧表示
- カードの状態別フィルタリング：
  - 新規カード
  - 学習中カード
  - 復習カード
- テキスト検索（表面・裏面を対象）

### 3.4 学習機能

#### 3.4.1 学習セッション開始
- デッキを選択して学習開始
- 今日の学習予定カードを自動表示
- カードの優先順位：
  1. 期限切れの復習カード
  2. 新規カード（1日の上限設定可能）
  3. 今日の復習カード

#### 3.4.2 カード表示
- 表面を表示
- 「答えを表示」ボタンで裏面を表示
- 画像がある場合は適切なサイズで表示
- Markdownのレンダリング

#### 3.4.3 自己評価（FSRS v4準拠）
裏面表示後、4段階で評価：
1. **Again（もう一度）**: 完全に忘れていた
2. **Hard（難しい）**: 思い出すのに苦労した
3. **Good（良い）**: 思い出せた
4. **Easy（簡単）**: 即座に思い出せた

#### 3.4.4 FSRS v4アルゴリズム
- 各カードの「記憶の安定性」と「記憶の難易度」を管理
- ユーザーの評価に基づいて次回復習日を計算
- 個人の学習パターンに適応（オプション：将来的に実装）

#### 3.4.5 学習セッション終了
- 残りカード数の表示
- 「学習終了」ボタンで終了
- 学習完了メッセージ
- ダッシュボードに戻る

### 3.5 ダッシュボード

#### 3.5.1 学習概要
- 今日の学習予定カード総数
- デッキ別の学習予定カード数
- 学習済みカード数（今日）

#### 3.5.2 クイックアクセス
- 各デッキへのクイックアクセスボタン
- 「今すぐ学習」ボタン

---

## 4. 非機能要件

### 4.1 パフォーマンス
- ページ読み込み時間: 2秒以内
- カード表示の切り替え: 100ms以内
- 同時アクセス: 100ユーザーまで対応（MVP）

### 4.2 セキュリティ
- パスワードのハッシュ化（Django標準のPBKDF2）
- CSRF対策（Django標準）
- XSS対策（テンプレートの自動エスケープ）
- セッションタイムアウト: 2週間

### 4.3 ユーザビリティ
- レスポンシブデザイン（モバイル・タブレット・デスクトップ）
- 直感的なナビゲーション
- 明確なフィードバック（成功/エラーメッセージ）
- キーボードショートカット対応（学習画面）

### 4.4 互換性
- ブラウザ: Chrome, Firefox, Safari, Edge（最新2バージョン）
- 画面解像度: 320px〜（モバイルファースト）

---

## 5. データモデル概要

### 5.1 主要エンティティ

1. **User（ユーザー）**
   - ユーザー名、メールアドレス、パスワード
   - 作成日時、最終ログイン日時

2. **Deck（デッキ）**
   - デッキ名、説明
   - 所有者（User）
   - 作成日時、更新日時

3. **Card（カード）**
   - 所属デッキ（Deck）
   - 表面、裏面
   - 画像（オプション）
   - 作成日時、更新日時

4. **ReviewLog（学習履歴）**
   - カード（Card）
   - ユーザー（User）
   - 評価（Again/Hard/Good/Easy）
   - 学習日時

5. **CardState（カード状態）**
   - カード（Card）
   - ユーザー（User）
   - FSRSパラメータ（stability, difficulty）
   - 次回復習日
   - 学習状態（新規/学習中/復習中）

---

## 6. 画面構成（ワイヤーフレーム概要）

### 6.1 認証画面
- ログイン画面
- 新規登録画面
- パスワードリセット画面（将来実装）

### 6.2 ダッシュボード
- デッキ一覧
- 今日の学習概要
- クイックアクションボタン

### 6.3 デッキ管理画面
- デッキ作成フォーム
- デッキ編集フォーム
- デッキ一覧

### 6.4 カード管理画面
- カード作成フォーム
- カード編集フォーム
- カード一覧

### 6.5 学習画面
- カード表示エリア
- 評価ボタン（4段階）
- 進捗表示
- 終了ボタン

### 6.6 設定画面
- プロフィール編集
- 学習設定（1日の新規カード上限など）

---

## 7. 将来的な拡張機能（MVP後）

### Phase 2
- タグ機能（カードやデッキにタグ付け）
- カードの検索・フィルタリング強化
- デッキのインポート/エクスポート（CSV, JSON）
- 基本的な学習統計（日別学習数、総学習時間）

### Phase 3
- 穴埋め（Cloze）カード対応
- 音声添付機能
- 学習グラフ・ヒートマップ
- カード難易度分析

### Phase 4
- デッキ共有機能
- 公開デッキライブラリ
- ソーシャル機能（フォロー、コメント）
- OAuth認証（Google, GitHub）

### Phase 5
- モバイルアプリ（React Native）
- オフライン対応（PWA）
- 高度な統計とレポート
- AIによるカード生成支援

---

## 8. 制約事項

### MVP版の制約
- デッキの階層構造はサポートしない（フラット構造のみ）
- タグ機能は未実装
- カードの並び替えは未実装
- インポート/エクスポート機能は未実装
- デッキ共有機能は未実装
- 詳細な学習統計は未実装
- 音声機能は未実装
- 穴埋めカードは未実装

### 技術的制約
- SQLiteを使用（ローカル開発）
- 画像サイズ上限: 5MB/枚
- 1ユーザーあたりのデッキ数上限: 100個
- 1デッキあたりのカード数上限: 10,000枚

---

## 9. 成功指標（KPI）

### MVP版での測定項目
1. ユーザー登録数
2. アクティブユーザー数（DAU/MAU）
3. 作成されたデッキ数
4. 作成されたカード数
5. 学習セッション数（1日あたり）
6. 平均学習時間
7. ユーザー継続率（7日後、30日後）

---

## 10. スケジュール概要

### フェーズ1: 基盤構築（Week 1-2）
- Djangoプロジェクトセットアップ
- データベースモデル設計・実装
- 認証システム実装

### フェーズ2: コア機能実装（Week 3-4）
- デッキ・カード管理機能
- FSRS v4アルゴリズム実装
- 学習機能実装

### フェーズ3: UI/UX改善（Week 5）
- Tailwind CSSでのスタイリング
- レスポンシブデザイン対応
- ユーザビリティテスト

### フェーズ4: テスト・デバッグ（Week 6）
- 単体テスト
- 統合テスト
- バグ修正

### フェーズ5: MVP リリース（Week 7）
- ドキュメント整備
- デプロイ準備
- 初回リリース

---

## 11. リスクと対応策

| リスク | 影響度 | 対応策 |
|--------|--------|--------|
| FSRS v4アルゴリズムの実装複雑性 | 高 | 既存のライブラリ（fsrs-rs-python）を活用 |
| 画像アップロードのパフォーマンス | 中 | 画像の圧縮とサイズ制限を実装 |
| ユーザー数増加によるDB負荷 | 中 | インデックス最適化、将来的にPostgreSQLへ移行 |
| モバイルでの使いにくさ | 中 | レスポンシブデザインとタッチ操作の最適化 |

---

## 12. 参考資料

- [FSRS Algorithm Documentation](https://github.com/open-spaced-repetition/fsrs4anki/wiki)
- [SuperMemo Algorithm](https://www.supermemo.com/en/archives1990-2015/english/ol/sm2)
- [Anki Documentation](https://docs.ankiweb.net/)
- [Django Documentation](https://docs.djangoproject.com/)

---

**このドキュメントは対話形式で作成され、アジャイル開発の原則に基づき、MVP（Minimum Viable Product）にフォーカスしています。**